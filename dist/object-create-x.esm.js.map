{"version":3,"sources":["../src/object-create-x.js"],"names":[],"mappings":"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","file":"object-create-x.esm.js","sourcesContent":["import attempt from 'attempt-x';\nimport isPrimitive from 'is-primitive-x';\nimport defineProperties from 'object-define-properties-x';\nimport toBoolean from 'to-boolean-x';\n\nconst ObjectCtr = {}.constructor;\nconst nCreate = ObjectCtr.create;\nconst nativeCreate = typeof nCreate === 'function' && nCreate;\n\nconst test1 = function test1() {\n  const res = attempt(nativeCreate, null);\n\n  return res.threw === false && res.value && typeof res.value === 'object';\n};\n\nconst test2 = function test2() {\n  const res = attempt(nativeCreate, null);\n\n  // noinspection LoopStatementThatDoesntLoopJS\n  for (const _ in res.value) /* eslint-disable-line guard-for-in,no-restricted-syntax */ {\n    return false;\n  }\n\n  return true;\n};\n\nconst test3 = function test3() {\n  const res = attempt(nativeCreate, null, {test: {value: true}});\n\n  return res.threw === false && res.value && typeof res.value === 'object' && res.value.test === true;\n};\n\nconst getShapes = function getShapes() {\n  // Shape - superclass\n  const Shape = function Shape() {\n    // noinspection JSUnusedGlobalSymbols\n    this.x = 0;\n    // noinspection JSUnusedGlobalSymbols\n    this.y = 0;\n  };\n\n  // superclass method\n  Shape.prototype.move = function move(x, y) {\n    // noinspection JSUnusedGlobalSymbols\n    this.x += x;\n    // noinspection JSUnusedGlobalSymbols\n    this.y += y;\n\n    return 'Shape moved.';\n  };\n\n  // Rectangle - subclass\n  const Rectangle = function Rectangle() {\n    Shape.call(this); // call super constructor.\n  };\n\n  return {Shape, Rectangle};\n};\n\nconst test4 = function test4() {\n  const {Shape} = getShapes();\n  const res = attempt(nativeCreate, Shape.prototype);\n\n  return res.threw === false && res.value && typeof res.value === 'object';\n};\n\nconst test5 = function test5() {\n  const {Shape, Rectangle} = getShapes();\n  const res = attempt(nativeCreate, Shape.prototype);\n  // subclass extends superclass\n  Rectangle.prototype = res.value;\n  Rectangle.prototype.constructor = Rectangle;\n\n  const rect = new Rectangle();\n\n  return rect instanceof Rectangle;\n};\n\nconst test6 = function test6() {\n  const {Shape, Rectangle} = getShapes();\n  const res = attempt(nativeCreate, Shape.prototype);\n  // subclass extends superclass\n  Rectangle.prototype = res.value;\n  Rectangle.prototype.constructor = Rectangle;\n\n  const rect = new Rectangle();\n\n  return rect instanceof Shape;\n};\n\nconst test7 = function test7() {\n  const {Shape, Rectangle} = getShapes();\n  const res = attempt(nativeCreate, Shape.prototype);\n  // subclass extends superclass\n  Rectangle.prototype = res.value;\n  Rectangle.prototype.constructor = Rectangle;\n\n  const rect = new Rectangle();\n\n  return rect.move(1, 1) === 'Shape moved.';\n};\n\nconst isWorking = toBoolean(nativeCreate) && test1() && test2() && test3() && test4() && test5() && test6() && test7();\n\n/**\n * This method method creates a new object with the specified prototype object and properties.\n *\n * @param {*} prototype - The object which should be the prototype of the newly-created object.\n * @param {*} [properties] - If specified and not undefined, an object whose enumerable own properties\n * (that is, those properties defined upon itself and not enumerable properties along its prototype chain)\n * specify property descriptors to be added to the newly-created object, with the corresponding property names.\n * @throws {TypeError} If the properties parameter isn't null or an object.\n * @returns {boolean} A new object with the specified prototype object and properties.\n */\nconst doc = typeof document !== 'undefined' && document;\nconst supportsProto = toBoolean({__proto__: null} instanceof ObjectCtr) === false;\n\n// Check for document.domain and active x support\n// No need to use active x approach when document.domain is not set\n// see https://github.com/es-shims/es5-shim/issues/150\n// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\nconst shouldUseActiveX = function shouldUseActiveX() {\n  // return early if document.domain not set\n  if (toBoolean(doc.domain) === false) {\n    return false;\n  }\n\n  const result = attempt(function attemptee() {\n    /* eslint-disable-next-line no-undef */\n    return new ActiveXObject('htmlfile');\n  });\n\n  return result.threw === false && Boolean(result.value);\n};\n\n// This supports IE8 when document.domain is used\n// see https://github.com/es-shims/es5-shim/issues/150\n// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\nconst getEmptyViaActiveX = function getEmptyViaActiveX() {\n  /* eslint-disable-next-line no-undef */\n  let xDoc = new ActiveXObject('htmlfile');\n  /* eslint-disable-next-line no-useless-escape,prettier/prettier */\n  xDoc.write('<script><\\/script>');\n  xDoc.close();\n\n  // noinspection JSUnresolvedVariable\n  const empty = xDoc.parentWindow.Object.prototype;\n  xDoc = null;\n\n  return empty;\n};\n\n// The original implementation using an iframe\n// before the activex approach was added\n// see https://github.com/es-shims/es5-shim/issues/150\nconst getEmptyViaIFrame = function getEmptyViaIFrame() {\n  let iframe = doc.createElement('iframe');\n  iframe.style.display = 'none';\n  /* eslint-disable-next-line no-script-url */\n  iframe.src = 'javascript:';\n\n  const parent = doc.body || doc.documentElement;\n  parent.appendChild(iframe);\n\n  const empty = iframe.contentWindow.Object.prototype;\n  parent.removeChild(iframe);\n  iframe = null;\n\n  return empty;\n};\n\n// the following produces false positives\n// in Opera Mini => not a reliable check\n// Object.prototype.__proto__ === null\nconst createEmptyProto = function createEmpty() {\n  return {__proto__: null};\n};\n\n// In old IE __proto__ can't be used to manually set `null`, nor does\n// any other method exist to make an object that inherits from nothing,\n// aside from Object.prototype itself. Instead, create a new global\n// object and *steal* its Object.prototype and strip it bare. This is\n// used as the prototype to create nullary objects.\nlet createEmptyNoProto = function createEmpty() {\n  // Determine which approach to use\n  // see https://github.com/es-shims/es5-shim/issues/150\n  const empty = shouldUseActiveX() ? getEmptyViaActiveX() : getEmptyViaIFrame();\n\n  delete empty.constructor;\n  delete empty.hasOwnProperty;\n  delete empty.propertyIsEnumerable;\n  delete empty.isPrototypeOf;\n  delete empty.toLocaleString;\n  delete empty.toString;\n  delete empty.valueOf;\n\n  /* eslint-disable-next-line lodash/prefer-noop */\n  const E = function Empty() {};\n\n  E.prototype = empty;\n  // short-circuit future calls\n  createEmptyNoProto = function createEmptyShortCircuit() {\n    return new E();\n  };\n\n  return new E();\n};\n\n// Contributed by Brandon Benvie, October, 2012\nconst createEmpty = supportsProto || toBoolean(doc) === false ? createEmptyProto : createEmptyNoProto;\n\nexport const implementation = function create(prototype, properties) {\n  let object;\n  /* eslint-disable-next-line lodash/prefer-noop */\n  const T = function Type() {}; // An empty constructor.\n\n  if (prototype === null) {\n    object = createEmpty();\n  } else {\n    if (isPrimitive(prototype)) {\n      // In the native implementation `parent` can be `null`\n      // OR *any* `instanceof Object`  (Object|Function|Array|RegExp|etc)\n      // Use `typeof` tho, b/c in old IE, DOM elements are not `instanceof Object`\n      // like they are in modern browsers. Using `Object.create` on DOM elements\n      // is...err...probably inappropriate, but the native version allows for it.\n      throw new TypeError('Object prototype may only be an Object or null'); // same msg as Chrome\n    }\n\n    T.prototype = prototype;\n    object = new T();\n    // IE has no built-in implementation of `Object.getPrototypeOf`\n    // neither `__proto__`, but this manually setting `__proto__` will\n    // guarantee that `Object.getPrototypeOf` will work as expected with\n    // objects created using `Object.create`\n    /* eslint-disable-next-line no-proto */\n    object.__proto__ = prototype;\n  }\n\n  if (typeof properties !== 'undefined') {\n    defineProperties(object, properties);\n  }\n\n  return object;\n};\n\nconst $create = isWorking ? nativeCreate : implementation;\n\nexport default $create;\n"]}